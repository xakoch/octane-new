document.addEventListener("DOMContentLoaded",function(){initScript(),requestAnimationFrame(()=>{})});let lenis;function initLenis(){try{"undefined"!=typeof Lenis&&(lenis&&(lenis.destroy(),lenis=null),lenis=new Lenis({duration:1.4,easing:e=>Math.min(1,1.001-Math.pow(2,-10*e)),direction:"vertical",gestureDirection:"vertical",smooth:!0,mouseMultiplier:1,smoothTouch:!0,touchMultiplier:2,infinite:!1,wrapper:window,content:document.documentElement}),window.lenis=lenis,requestAnimationFrame(function e(t){lenis.raf(t),requestAnimationFrame(e)}))}catch(e){console.error("Error in "+arguments.callee.name+":",e)}}function initWindowInnerheight(){try{$(document).ready(()=>{var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",e+"px")})}catch(e){console.error("Error in "+arguments.callee.name+":",e)}}function initSwiperSlider(){try{"undefined"==typeof Swiper?console.warn("Swiper не найден"):(document.querySelector(".offers__slider")&&new Swiper(".offers__slider",{slidesPerView:"auto",centeredSlides:!0,spaceBetween:30,navigation:{nextEl:".offers__arrows-right",prevEl:".offers__arrows-left"},breakpoints:{1200:{slidesPerView:3,spaceBetween:30}},on:{init:function(){this.wrapperEl.classList.add("swiper-wrapper-reset"),setTimeout(()=>{this.wrapperEl.classList.remove("swiper-wrapper-reset"),this.slideNext(0)},100)}}}),console.log("Swiper sliders initialized successfully"))}catch(e){console.error("Error in initSwiperSlider:",e)}}function initFaq(){try{const i=document.querySelectorAll(".faq__item");0!==i.length&&i.forEach(t=>{var e=t.querySelector(".faq__header"),n=t.querySelector(".faq__text");e&&n&&e.addEventListener("click",()=>{var e=t.classList.contains("active");i.forEach(e=>{e!==t&&e.classList.contains("active")&&e.classList.remove("active")}),e?t.classList.remove("active"):(t.classList.add("active"),window.lenis&&setTimeout(()=>{window.lenis.resize()},300))})})}catch(e){console.error("Error in "+arguments.callee.name+":",e)}}function initFactsCounter(){try{var e=document.querySelectorAll(".counter");if(0!==e.length)if("undefined"==typeof gsap)console.warn("GSAP не найден, анимация счётчика не будет работать");else{const i=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){e=e.target;const t=e.querySelectorAll(".facts__item");gsap.fromTo(t,{opacity:0,y:30},{opacity:1,y:0,duration:.8,stagger:.15,ease:"power3.out",onStart:function(){t.forEach((e,t)=>{e=e.querySelector(".counter");e&&!e.classList.contains("animated")&&(e.classList.add("animated"),n(e,.15*t))})}}),i.unobserve(e)}})},{threshold:.3});var t=document.querySelector(".facts__bottom");t&&i.observe(t)}function a(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function n(i,e){const r=parseInt(i.getAttribute("data-target")),o=performance.now()+1e3*e;let s=0;requestAnimationFrame(function e(t){var n;t<o||(t-=o,t=Math.min(t/2e3,1),n=(1-Math.pow(1-t,4))*r,(n=Math.round(n))!==s&&(i.textContent=a(n),s=n),t<1)?requestAnimationFrame(e):i.textContent=a(r)})}}catch(e){console.error("Error in "+arguments.callee.name+":",e)}}function initLazyLoad(){try{var e=document.querySelectorAll("img.lazy-load");if(0!==e.length){const t=new IntersectionObserver((e,i)=>{e.forEach(e=>{if(e.isIntersecting){const t=e.target,n=t.getAttribute("data-src");n&&((e=new Image).onload=()=>{t.style.opacity="0",setTimeout(()=>{t.src=n,t.removeAttribute("data-src"),t.classList.add("loaded"),setTimeout(()=>{t.style.opacity="1"},50)},300)},e.src=n,i.unobserve(t))}})},{rootMargin:"50px"});e.forEach(e=>{t.observe(e)})}}catch(e){console.error("Error in "+arguments.callee.name+":",e)}}function initSpecials(){try{var e=document.querySelectorAll(".specials__item");0!==e.length&&e.forEach(t=>{const n=t.querySelector(".link");if(n){const i=n.textContent;n.addEventListener("click",e=>{e.preventDefault(),t.classList.contains("expanded")?(t.classList.remove("expanded"),n.textContent=i):(t.classList.add("expanded"),n.textContent="hide"),window.lenis&&setTimeout(()=>{window.lenis.resize()},400)})}})}catch(e){console.error("Error in "+arguments.callee.name+":",e)}}function initScript(){try{initLenis(),initWindowInnerheight(),initSwiperSlider(),initFaq(),initSpecials(),initLazyLoad(),initFactsCounter()}catch(e){console.error("Error in "+arguments.callee.name+":",e)}}